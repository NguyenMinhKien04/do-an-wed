<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel=" stylesheet" href="stylefont.css">
    <link rel=" stylesheet" href="/css/dangki.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="./vendor/fontawesome/js/all.min.js"></script>
    <script src="/information.js"></script>
    <title>Register</title>
</head>

<body>
    <div class="wrapper">
        <form id="formDangKy">
            <h1>Đăng ký</h1>
            <div class="input-box">
                <input type="email" id="email" placeholder="Email" required>
                <i class='bx bxs-user'></i>
            </div>

            <div class="input-box">
                <input type="password" id="password" placeholder="Mật khẩu" required>
                <i class='bx bxs-lock-alt'></i>
            </div>
            <div class="input-box">
                <input type="password" id="confirmPassword" placeholder="Nhập lại mật khẩu" required>
                <i class='bx bxs-lock-alt'></i>
            </div>

            <button type="button" class="register" onclick="dangKy()">Đăng ký</button>

            <div class="login">
                <p>Đã có tài khoản? <a href="dangnhap.html">Đăng nhập</a></p>
            </div>
        </form>

        <script>
            function dangKy() {
                var email = document.getElementById('email').value;
                var password = document.getElementById('password').value;
                var confirmPassword = document.getElementById('confirmPassword').value;

                // Kiểm tra xem cả tài khoản và mật khẩu đã được nhập chưa
                if (!email || !password || !confirmPassword) {
                    alert("Vui lòng nhập đầy đủ thông tin tài khoản và mật khẩu.");
                    return;
                }

                if (password !== confirmPassword) {
                    alert("Mật khẩu không khớp!");
                    return;
                }


              
                var accountStorage = JSON.parse(localStorage.getItem('registeredAccount')) || [];
              
                // Kiểm tra xem tài khoản đã tồn tại chưa
                 for (var i = 0; i < accountStorage.length; i++) {
                    if (accountStorage[i].email === email) {
                        alert("Tài khoản đã tồn tại.");
                        return;
                    }
                }

                // Kiểm tra xem tài khoản có phải là admin không
                // isAdmin la kiểu boolean
                var isAdmin = (email === "admin" && password === "admin");
                //khi goi ben login accounts[i].isAdmin phai goi truoc dau :   sau dau : là kiểu boolean
                // sau : là tất cả kiểu var
                // truoc : là kiểu gọi khi vd: accounts[i].email// hieu dai khai la khi goi nhu vay no se lay gia tri la email sau dau : de so sanh, giong nhu boolean
                // sau dau : là var và emailDangNhap cx la var nen suy ra var la gia tri,,,...
                var account = { email: email, password: password, isAdmin: isAdmin };

                accountStorage.push(account);

                localStorage.setItem('registeredAccount', JSON.stringify(accountStorage));

                window.location.href = "dangnhap.html";
            }
        </script>
    </div>
</body>

</html>